{
  "name": "@aklapper/crud-api-e2e",
  "private": true,
  "type": "commonjs",
  "nx": {
    "name": "crud-api-e2e",
    "projectType": "application",
    "implicitDependencies": [
      "crud-api"
    ],
    "targets": {
      "e2e": {
        "executor": "@nx/jest:jest",
        "outputs": [
          "{workspaceRoot}/coverage/{e2eProjectRoot}"
        ],
        "options": {
          "jestConfig": "apis/crud/crud-api-e2e/jest.config.ts",
          "passWithNoTests": true
        },
        "dependsOn": [
          "crud-api:build"
        ]
      },
      "docker-build-ci-database": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "{workspaceRoot}",
          "commands": [
            {
              "description": "Build Docker Database for e2e Test",
              "command": "docker build -f ./Dockerfile.db.testing . -t ci-database"
            }
          ]
        }
      },
      "docker-compose-up-db": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "{workspaceRoot}",
          "commands": [
            {
              "description": "Start Docker Database container",
              "command": "docker compose -f docker-compose.database.yaml up -d && sleep 2.5"
            }
          ]
        }
      },
      "docker-compose-down-db": {
        "executor": "nx:run-commands",
        "options": {
          "cwd": "{workspaceRoot}",
          "commands": [
            {
              "description": "Shutdown Docker Database container",
              "command": "docker compose -f ./docker-compose.database.yaml down"
            }
          ]
        }
      }
    }
  }
}